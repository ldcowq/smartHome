###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.1.10194/W32 for 8051         28/Dec/2020  20:28:42 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Components\hal\target\CC2530EB\hal_lcd.c          #
#    Command line       =  -f D:\developer_tool_install\IAR\ZStack-CC2530-2.5 #
#                          .1a\Projects\zstack\Samples\SmartHome\CC2530DB\..\ #
#                          ..\..\Tools\CC2530DB\f8wCoord.cfg (-DCPU32MHZ      #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DZDO_COORDINATOR -DRTR_NWK)    #
#                          -f D:\developer_tool_install\IAR\ZStack-CC2530-2.5 #
#                          .1a\Projects\zstack\Samples\SmartHome\CC2530DB\..\ #
#                          ..\..\Tools\CC2530DB\f8wConfig.cfg (-DZIGBEEPRO    #
#                          -DSECURE=0 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR       #
#                          -DDEFAULT_CHANLIST=0x00010000                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFAA                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 D:\developer_tool_install\I #
#                          AR\ZStack-CC2530-2.5.1a\Components\hal\target\CC25 #
#                          30EB\hal_lcd.c -D ZTOOL_P1 -D xMT_TASK -D          #
#                          xMT_SYS_FUNC -D xMT_ZDO_FUNC -D                    #
#                          xLCD_SUPPORTED=DEBUG -lC                           #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\mq2\Li #
#                          st\ -lA D:\developer_tool_install\IAR\ZStack-CC253 #
#                          0-2.5.1a\Projects\zstack\Samples\SmartHome\CC2530D #
#                          B\mq2\List\ --diag_suppress Pe001,Pa010 -o         #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\mq2\Ob #
#                          j\ -e --no_code_motion --debug --core=plain        #
#                          --dptr=16,1 --data_model=large                     #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I D:\developer_tool_install\ #
#                          IAR\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\S #
#                          martHome\CC2530DB\ -I D:\developer_tool_install\IA #
#                          R\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sma #
#                          rtHome\CC2530DB\..\Source\ -I                      #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\..\..\ #
#                          ..\ZMain\TI2530DB\ -I D:\developer_tool_install\IA #
#                          R\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sma #
#                          rtHome\CC2530DB\..\..\..\..\..\Components\hal\incl #
#                          ude\ -I D:\developer_tool_install\IAR\ZStack-CC253 #
#                          0-2.5.1a\Projects\zstack\Samples\SmartHome\CC2530D #
#                          B\..\..\..\..\..\Components\hal\target\CC2530EB\   #
#                          -I D:\developer_tool_install\IAR\ZStack-CC2530-2.5 #
#                          .1a\Projects\zstack\Samples\SmartHome\CC2530DB\..\ #
#                          ..\..\..\..\Components\mac\include\ -I             #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\..\..\ #
#                          ..\..\..\Components\mac\high_level\ -I             #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\..\..\ #
#                          ..\..\..\Components\mac\low_level\srf04\ -I        #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\..\..\ #
#                          ..\..\..\Components\mac\low_level\srf04\single_chi #
#                          p\ -I D:\developer_tool_install\IAR\ZStack-CC2530- #
#                          2.5.1a\Projects\zstack\Samples\SmartHome\CC2530DB\ #
#                          ..\..\..\..\..\Components\mt\ -I                   #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\..\..\ #
#                          ..\..\..\Components\osal\include\ -I               #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\..\..\ #
#                          ..\..\..\Components\services\saddr\ -I             #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\..\..\ #
#                          ..\..\..\Components\services\sdata\ -I             #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\..\..\ #
#                          ..\..\..\Components\stack\af\ -I                   #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\..\..\ #
#                          ..\..\..\Components\stack\nwk\ -I                  #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\..\..\ #
#                          ..\..\..\Components\stack\sapi\ -I                 #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\..\..\ #
#                          ..\..\..\Components\stack\sec\ -I                  #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\..\..\ #
#                          ..\..\..\Components\stack\sys\ -I                  #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\..\..\ #
#                          ..\..\..\Components\stack\zdo\ -I                  #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\..\..\ #
#                          ..\..\..\Components\zmac\ -I                       #
#                          D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\..\..\ #
#                          ..\..\..\Components\zmac\f8w\ -Ohz                 #
#                          --require_prototypes                               #
#    List file          =  D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\mq2\Li #
#                          st\hal_lcd.lst                                     #
#    Object file        =  D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SmartHome\CC2530DB\mq2\Ob #
#                          j\hal_lcd.r51                                      #
#                                                                             #
#                                                                             #
###############################################################################

D:\developer_tool_install\IAR\ZStack-CC2530-2.5.1a\Components\hal\target\CC2530EB\hal_lcd.c
      1          /**************************************************************************************************
      2            Filename:       hal_lcd.c
      3            Revised:        $Date: 2010-06-21 17:31:27 -0700 (Mon, 21 Jun 2010) $
      4            Revision:       $Revision: 22794 $
      5          
      6            Description:    This file contains the interface to the HAL LCD Service.
      7          
      8          
      9            Copyright 2007-2010 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /**************************************************************************************************
     41           *                                           INCLUDES
     42           **************************************************************************************************/
     43          #include "hal_types.h"
     44          #include "hal_lcd.h"

   \                                 In  segment SFR_AN, at 0x80
   \   union <unnamed> volatile __sfr _A_P0
   \                     _A_P0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x90
   \   union <unnamed> volatile __sfr _A_P1
   \                     _A_P1:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf1
   \   unsigned char volatile __sfr PERCFG
   \                     PERCFG:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf3
   \   unsigned char volatile __sfr P0SEL
   \                     P0SEL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf4
   \   unsigned char volatile __sfr P1SEL
   \                     P1SEL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf8
   \   union <unnamed> volatile __sfr _A_U1CSR
   \                     _A_U1CSR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf9
   \   unsigned char volatile __sfr U1DBUF
   \                     U1DBUF:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfa
   \   unsigned char volatile __sfr U1BAUD
   \                     U1BAUD:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfb
   \   unsigned char volatile __sfr U1UCR
   \                     U1UCR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfc
   \   unsigned char volatile __sfr U1GCR
   \                     U1GCR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfd
   \   unsigned char volatile __sfr P0DIR
   \                     P0DIR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfe
   \   unsigned char volatile __sfr P1DIR
   \                     P1DIR:
   \   000000                DS 1
     45          #include "OSAL.h"
     46          #include "OnBoard.h"
     47          #include "hal_assert.h"
     48          
     49          #if defined (ZTOOL_P1) || defined (ZTOOL_P2)
     50            #include "DebugTrace.h"
     51          #endif
     52          
     53          /**************************************************************************************************
     54           *                                          CONSTANTS
     55           **************************************************************************************************/
     56          /*
     57            LCD pins
     58          
     59            //control
     60            P0.0 - LCD_MODE
     61            P1.1 - LCD_FLASH_RESET
     62            P1.2 - LCD_CS
     63          
     64            //spi
     65            P1.5 - CLK
     66            P1.6 - MOSI
     67            P1.7 - MISO
     68          */
     69          
     70          /* LCD Control lines */
     71          #define HAL_LCD_MODE_PORT 0
     72          #define HAL_LCD_MODE_PIN  0
     73          
     74          #define HAL_LCD_RESET_PORT 1
     75          #define HAL_LCD_RESET_PIN  1
     76          
     77          #define HAL_LCD_CS_PORT 1
     78          #define HAL_LCD_CS_PIN  2
     79          
     80          /* LCD SPI lines */
     81          #define HAL_LCD_CLK_PORT 1
     82          #define HAL_LCD_CLK_PIN  5
     83          
     84          #define HAL_LCD_MOSI_PORT 1
     85          #define HAL_LCD_MOSI_PIN  6
     86          
     87          #define HAL_LCD_MISO_PORT 1
     88          #define HAL_LCD_MISO_PIN  7
     89          
     90          /* SPI settings */
     91          #define HAL_SPI_CLOCK_POL_LO       0x00
     92          #define HAL_SPI_CLOCK_PHA_0        0x00
     93          #define HAL_SPI_TRANSFER_MSB_FIRST 0x20
     94          
     95          /* LCD lines */
     96          #define LCD_MAX_LINE_COUNT              3
     97          #define LCD_MAX_LINE_LENGTH             16
     98          #define LCD_MAX_BUF                     25
     99          
    100          /* Defines for HW LCD */
    101          
    102          /* Set power save mode */
    103          #define OSC_OFF                         0x00
    104          #define OSC_ON                          0x01
    105          #define POWER_SAVE_OFF                  0x00
    106          #define POWER_SAVE_ON                   0x02
    107          #define SET_POWER_SAVE_MODE(options)    HalLcd_HW_Control(0x0C | (options))
    108          
    109          /* Function Set */
    110          #define CGROM                           0x00
    111          #define CGRAM                           0x01
    112          #define COM_FORWARD                     0x00
    113          #define COM_BACKWARD                    0x02
    114          #define TWO_LINE                        0x00
    115          #define THREE_LINE                      0x04
    116          #define FUNCTION_SET(options)           HalLcd_HW_Control(0x10 | (options))
    117          
    118          /* Set Display Start Line */
    119          #define LINE1                           0x00
    120          #define LINE2                           0x01
    121          #define LINE3                           0x02
    122          #define LINE4                           0x03
    123          #define SET_DISPLAY_START_LINE(line)    HalLcd_HW_Control(0x18 | (line))
    124          
    125          /* Bias control */
    126          #define BIAS_1_5                        0x00
    127          #define BIAS_1_4                        0x01
    128          #define SET_BIAS_CTRL(bias)             HalLcd_HW_Control(0x1C | (bias))
    129          
    130          /* Power control */
    131          #define VOLTAGE_DIVIDER_OFF             0x00
    132          #define VOLTAGE_DIVIDER_ON              0x01
    133          #define CONVERTER_AND_REG_OFF           0x00
    134          #define CONVERTER_AND_REG_ON            0x04
    135          #define SET_POWER_CTRL(options)         HalLcd_HW_Control(0x20 | (options))
    136          
    137          // Set display control
    138          #define DISPLAY_CTRL_ON                 0x01
    139          #define DISPLAY_CTRL_OFF                0x00
    140          #define DISPLAY_CTRL_BLINK_ON           0x02
    141          #define DISPLAY_CTRL_BLINK_OFF          0x00
    142          #define DISPLAY_CTRL_CURSOR_ON          0x04
    143          #define DISPLAY_CTRL_CURSOR_OFF         0x00
    144          #define SET_DISPLAY_CTRL(options)       HalLcd_HW_Control(0x28 | (options))
    145          
    146          /* Set DD/ CGRAM address */
    147          #define SET_DDRAM_ADDR(charIndex)       HalLcd_HW_Control(0x80 | (charIndex))
    148          #define SET_GCRAM_CHAR(specIndex)       HalLcd_HW_Control(0xC0 | (specIndex))
    149          
    150          /* Set ICONRAM address */
    151          #define CONTRAST_CTRL_REGISTER          0x10
    152          #define SET_ICONRAM_ADDR(addr)          HalLcd_HW_Control(0x40 | (addr))
    153          
    154          /* Set double height */
    155          #define LINE_1_AND_2                    0x01
    156          #define LINE_2_AND_3                    0x02
    157          #define NORMAL_DISPLAY                  0x00
    158          #define SET_DOUBLE_HEIGHT(options)      HalLcd_HW_Control(0x08 | (options))
    159          
    160          /**************************************************************************************************
    161           *                                           MACROS
    162           **************************************************************************************************/
    163          
    164          #define HAL_IO_SET(port, pin, val)        HAL_IO_SET_PREP(port, pin, val)
    165          #define HAL_IO_SET_PREP(port, pin, val)   st( P##port##_##pin## = val; )
    166          
    167          #define HAL_CONFIG_IO_OUTPUT(port, pin, val)      HAL_CONFIG_IO_OUTPUT_PREP(port, pin, val)
    168          #define HAL_CONFIG_IO_OUTPUT_PREP(port, pin, val) st( P##port##SEL &= ~BV(pin); \
    169                                                                P##port##_##pin## = val; \
    170                                                                P##port##DIR |= BV(pin); )
    171          
    172          #define HAL_CONFIG_IO_PERIPHERAL(port, pin)      HAL_CONFIG_IO_PERIPHERAL_PREP(port, pin)
    173          #define HAL_CONFIG_IO_PERIPHERAL_PREP(port, pin) st( P##port##SEL |= BV(pin); )
    174          
    175          
    176          
    177          /* SPI interface control */
    178          #define LCD_SPI_BEGIN()     HAL_IO_SET(HAL_LCD_CS_PORT,  HAL_LCD_CS_PIN,  0); /* chip select */
    179          #define LCD_SPI_END()                                                         \
    180          {                                                                             \
    181            asm("NOP");                                                                 \
    182            asm("NOP");                                                                 \
    183            asm("NOP");                                                                 \
    184            asm("NOP");                                                                 \
    185            HAL_IO_SET(HAL_LCD_CS_PORT,  HAL_LCD_CS_PIN,  1); /* chip select */         \
    186          }
    187          /* clear the received and transmit byte status, write tx data to buffer, wait till transmit done */
    188          #define LCD_SPI_TX(x)                   { U1CSR &= ~(BV(2) | BV(1)); U1DBUF = x; while( !(U1CSR & BV(1)) ); }
    189          #define LCD_SPI_WAIT_RXRDY()            { while(!(U1CSR & BV(1))); }
    190          
    191          
    192          /* Control macros */
    193          #define LCD_DO_WRITE()        HAL_IO_SET(HAL_LCD_MODE_PORT,  HAL_LCD_MODE_PIN,  1);
    194          #define LCD_DO_CONTROL()      HAL_IO_SET(HAL_LCD_MODE_PORT,  HAL_LCD_MODE_PIN,  0);
    195          
    196          #define LCD_ACTIVATE_RESET()  HAL_IO_SET(HAL_LCD_RESET_PORT, HAL_LCD_RESET_PIN, 0);
    197          #define LCD_RELEASE_RESET()   HAL_IO_SET(HAL_LCD_RESET_PORT, HAL_LCD_RESET_PIN, 1);
    198          
    199          #if (HAL_LCD == TRUE)
    200          /**************************************************************************************************
    201           *                                       LOCAL VARIABLES
    202           **************************************************************************************************/
    203          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    204          static uint8 *Lcd_Line1;
   \                     Lcd_Line1:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    205          
    206          /**************************************************************************************************
    207           *                                       FUNCTIONS - API
    208           **************************************************************************************************/
    209          
    210          void HalLcd_HW_Init(void);
    211          void HalLcd_HW_WaitUs(uint16 i);
    212          void HalLcd_HW_Clear(void);
    213          void HalLcd_HW_ClearAllSpecChars(void);
    214          void HalLcd_HW_Control(uint8 cmd);
    215          void HalLcd_HW_Write(uint8 data);
    216          void HalLcd_HW_SetContrast(uint8 value);
    217          void HalLcd_HW_WriteChar(uint8 line, uint8 col, char text);
    218          void HalLcd_HW_WriteLine(uint8 line, const char *pText);
    219          #endif //LCD
    220          
    221          /**************************************************************************************************
    222           * @fn      HalLcdInit
    223           *
    224           * @brief   Initilize LCD Service
    225           *
    226           * @param   init - pointer to void that contains the initialized value
    227           *
    228           * @return  None
    229           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    230          void HalLcdInit(void)
   \                     HalLcdInit:
    231          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    232          #if (HAL_LCD == TRUE)
    233            Lcd_Line1 = NULL;
   \   000004   90....       MOV     DPTR,#Lcd_Line1
   \   000007   E4           CLR     A
   \   000008   F0           MOVX    @DPTR,A
   \   000009   A3           INC     DPTR
   \   00000A   F0           MOVX    @DPTR,A
    234            HalLcd_HW_Init();
   \   00000B                ; Setup parameters for call to function HalLcd_HW_Init
   \   00000B   12....       LCALL   ??HalLcd_HW_Init?relay
    235          #endif
    236          }
   \   00000E                REQUIRE ?Subroutine1
   \   00000E                ; // Fall through to label ?Subroutine1

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   D083         POP     DPH
   \   000002   D082         POP     DPL
   \   000004   02....       LJMP    ?BRET
    237          
    238          /*************************************************************************************************
    239           *                    LCD EMULATION FUNCTIONS
    240           *
    241           * Some evaluation boards are equipped with Liquid Crystal Displays
    242           * (LCD) which may be used to display diagnostic information. These
    243           * functions provide LCD emulation, sending the diagnostic strings
    244           * to Z-Tool via the RS232 serial port. These functions are enabled
    245           * when the "LCD_SUPPORTED" compiler flag is placed in the makefile.
    246           *
    247           * Most applications update both lines (1 and 2) of the LCD whenever
    248           * text is posted to the device. This emulator assumes that line 1 is
    249           * updated first (saved locally) and the formatting and send operation
    250           * is triggered by receipt of line 2. Nothing will be transmitted if
    251           * only line 1 is updated.
    252           *
    253           *************************************************************************************************/
    254          
    255          
    256          /**************************************************************************************************
    257           * @fn      HalLcdWriteString
    258           *
    259           * @brief   Write a string to the LCD
    260           *
    261           * @param   str    - pointer to the string that will be displayed
    262           *          option - display options
    263           *
    264           * @return  None
    265           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    266          void HalLcdWriteString ( char *str, uint8 option)
   \                     HalLcdWriteString:
    267          {
   \   000000   74EF         MOV     A,#-0x11
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 17
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
   \   000009   89..         MOV     ?V0 + 8,R1
    268          #if (HAL_LCD == TRUE)
    269          
    270            uint8 strLen = 0;
    271            uint8 totalLen = 0;
    272            uint8 *buf;
    273            uint8 tmpLen;
    274          
    275            if ( Lcd_Line1 == NULL )
   \   00000B   90....       MOV     DPTR,#Lcd_Line1
   \   00000E   E0           MOVX    A,@DPTR
   \   00000F   F8           MOV     R0,A
   \   000010   A3           INC     DPTR
   \   000011   E0           MOVX    A,@DPTR
   \   000012   F9           MOV     R1,A
   \   000013   E8           MOV     A,R0
   \   000014   49           ORL     A,R1
   \   000015   7018         JNZ     ??HalLcdWriteString_0
    276            {
    277              Lcd_Line1 = osal_mem_alloc( HAL_LCD_MAX_CHARS+1 );
   \   000017                ; Setup parameters for call to function osal_mem_alloc
   \   000017   7A11         MOV     R2,#0x11
   \   000019   7B00         MOV     R3,#0x0
   \   00001B   12....       LCALL   ??osal_mem_alloc?relay
   \   00001E   90....       MOV     DPTR,#Lcd_Line1
   \   000021   EA           MOV     A,R2
   \   000022   F0           MOVX    @DPTR,A
   \   000023   A3           INC     DPTR
   \   000024   EB           MOV     A,R3
   \   000025   F0           MOVX    @DPTR,A
    278              HalLcdWriteString( "TexasInstruments", 1 );
   \   000026                ; Setup parameters for call to function HalLcdWriteString
   \   000026   7901         MOV     R1,#0x1
   \   000028   7A..         MOV     R2,#`?<Constant "TexasInstruments">` & 0xff
   \   00002A   7B..         MOV     R3,#(`?<Constant "TexasInstruments">` >> 8) & 0xff
   \   00002C   12....       LCALL   ??HalLcdWriteString?relay
    279            }
    280          
    281            strLen = (uint8)osal_strlen( (char*)str );
   \                     ??HalLcdWriteString_0:
   \   00002F                ; Setup parameters for call to function osal_strlen
   \   00002F   EE           MOV     A,R6
   \   000030   FA           MOV     R2,A
   \   000031   EF           MOV     A,R7
   \   000032   FB           MOV     R3,A
   \   000033   12....       LCALL   ??osal_strlen?relay
   \   000036   EA           MOV     A,R2
   \   000037   F5..         MOV     ?V0 + 7,A
    282          
    283            /* Check boundries */
    284            if ( strLen > HAL_LCD_MAX_CHARS )
   \   000039   C3           CLR     C
   \   00003A   9411         SUBB    A,#0x11
   \   00003C   4003         JC      ??HalLcdWriteString_1
    285              strLen = HAL_LCD_MAX_CHARS;
   \   00003E   75..10       MOV     ?V0 + 7,#0x10
    286          
    287            if ( option == HAL_LCD_LINE_1 )
   \                     ??HalLcdWriteString_1:
   \   000041   7401         MOV     A,#0x1
   \   000043   65..         XRL     A,?V0 + 8
   \   000045   7036         JNZ     ??HalLcdWriteString_2
    288            {
    289              /* Line 1 gets saved for later */
    290              osal_memcpy( Lcd_Line1, str, strLen );
   \   000047                ; Setup parameters for call to function osal_memcpy
   \   000047   8E..         MOV     ?V0 + 0,R6
   \   000049   8F..         MOV     ?V0 + 1,R7
   \   00004B   75..00       MOV     ?V0 + 2,#0x0
   \   00004E   78..         MOV     R0,#?V0 + 0
   \   000050   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000053   85....       MOV     ?V0 + 0,?V0 + 7
   \   000056   AC..         MOV     R4,?V0 + 0
   \   000058   7D00         MOV     R5,#0x0
   \   00005A   90....       MOV     DPTR,#Lcd_Line1
   \   00005D   E0           MOVX    A,@DPTR
   \   00005E   FA           MOV     R2,A
   \   00005F   A3           INC     DPTR
   \   000060   E0           MOVX    A,@DPTR
   \   000061   FB           MOV     R3,A
   \   000062   12....       LCALL   ??Subroutine10_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_13:
   \   000065   12....       LCALL   ?DEALLOC_XSTACK8
    291              Lcd_Line1[strLen] = '\0';
   \   000068   A8..         MOV     R0,?V0 + 7
   \   00006A   90....       MOV     DPTR,#Lcd_Line1
   \   00006D   E0           MOVX    A,@DPTR
   \   00006E   28           ADD     A,R0
   \   00006F   FA           MOV     R2,A
   \   000070   A3           INC     DPTR
   \   000071   E0           MOVX    A,@DPTR
   \   000072   3400         ADDC    A,#0x0
   \   000074   8A82         MOV     DPL,R2
   \   000076   F583         MOV     DPH,A
   \   000078   E4           CLR     A
   \   000079   F0           MOVX    @DPTR,A
   \   00007A   02....       LJMP    ??HalLcdWriteString_3 & 0xFFFF
    292            }
    293            else
    294            {
    295              /* Line 2 triggers action */
    296              tmpLen = (uint8)osal_strlen( (char*)Lcd_Line1 );
   \                     ??HalLcdWriteString_2:
   \   00007D                ; Setup parameters for call to function osal_strlen
   \   00007D   90....       MOV     DPTR,#Lcd_Line1
   \   000080   E0           MOVX    A,@DPTR
   \   000081   FA           MOV     R2,A
   \   000082   A3           INC     DPTR
   \   000083   E0           MOVX    A,@DPTR
   \   000084   FB           MOV     R3,A
   \   000085   12....       LCALL   ?Subroutine6 & 0xFFFF
    297              totalLen =  tmpLen + 1 + strLen + 1;
    298              buf = osal_mem_alloc( totalLen );
   \                     ??CrossCallReturnLabel_0:
   \   000088                ; Setup parameters for call to function osal_mem_alloc
   \   000088   25..         ADD     A,?V0 + 7
   \   00008A   2402         ADD     A,#0x2
   \   00008C   FA           MOV     R2,A
   \   00008D   7B00         MOV     R3,#0x0
   \   00008F   12....       LCALL   ??osal_mem_alloc?relay
   \   000092   8A..         MOV     ?V0 + 0,R2
   \   000094   8B..         MOV     ?V0 + 1,R3
    299              if ( buf != NULL )
   \   000096   EA           MOV     A,R2
   \   000097   45..         ORL     A,?V0 + 1
   \   000099   6068         JZ      ??HalLcdWriteString_3
    300              {
    301                /* Concatenate strings */
    302                osal_memcpy( buf, Lcd_Line1, tmpLen );
   \   00009B                ; Setup parameters for call to function osal_memcpy
   \   00009B   90....       MOV     DPTR,#Lcd_Line1
   \   00009E   E0           MOVX    A,@DPTR
   \   00009F   F5..         MOV     ?V0 + 4,A
   \   0000A1   A3           INC     DPTR
   \   0000A2   E0           MOVX    A,@DPTR
   \   0000A3   F5..         MOV     ?V0 + 5,A
   \   0000A5   75..00       MOV     ?V0 + 6,#0x0
   \   0000A8   78..         MOV     R0,#?V0 + 4
   \   0000AA   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000AD   85....       MOV     ?V0 + 4,?V0 + 2
   \   0000B0   AC..         MOV     R4,?V0 + 4
   \   0000B2   7D00         MOV     R5,#0x0
   \   0000B4   12....       LCALL   ??Subroutine10_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_14:
   \   0000B7   12....       LCALL   ?DEALLOC_XSTACK8
    303                buf[tmpLen++] = ' ';
   \   0000BA   E5..         MOV     A,?V0 + 0
   \   0000BC   25..         ADD     A,?V0 + 4
   \   0000BE   F582         MOV     DPL,A
   \   0000C0   E5..         MOV     A,?V0 + 1
   \   0000C2   12....       LCALL   ??Subroutine12_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_16:
   \   0000C5   05..         INC     ?V0 + 2
    304                osal_memcpy( &buf[tmpLen], str, strLen );
   \   0000C7                ; Setup parameters for call to function osal_memcpy
   \   0000C7   8E..         MOV     ?V0 + 4,R6
   \   0000C9   8F..         MOV     ?V0 + 5,R7
   \   0000CB   78..         MOV     R0,#?V0 + 4
   \   0000CD   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000D0   85....       MOV     ?V0 + 4,?V0 + 7
   \   0000D3   AC..         MOV     R4,?V0 + 4
   \   0000D5   7D00         MOV     R5,#0x0
   \   0000D7   E5..         MOV     A,?V0 + 0
   \   0000D9   25..         ADD     A,?V0 + 2
   \   0000DB   FA           MOV     R2,A
   \   0000DC   E5..         MOV     A,?V0 + 1
   \   0000DE   3400         ADDC    A,#0x0
   \   0000E0   FB           MOV     R3,A
   \   0000E1   12....       LCALL   ??Subroutine10_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_15:
   \   0000E4   12....       LCALL   ?DEALLOC_XSTACK8
    305                buf[tmpLen+strLen] = '\0';
   \   0000E7   E5..         MOV     A,?V0 + 2
   \   0000E9   25..         ADD     A,?V0 + 4
   \   0000EB   F8           MOV     R0,A
   \   0000EC   E4           CLR     A
   \   0000ED   3400         ADDC    A,#0x0
   \   0000EF   F9           MOV     R1,A
   \   0000F0   E5..         MOV     A,?V0 + 0
   \   0000F2   28           ADD     A,R0
   \   0000F3   F582         MOV     DPL,A
   \   0000F5   E5..         MOV     A,?V0 + 1
   \   0000F7   39           ADDC    A,R1
   \   0000F8   F583         MOV     DPH,A
   \   0000FA   E4           CLR     A
   \   0000FB   F0           MOVX    @DPTR,A
    306          
    307                /* Send it out */
    308          #if defined (ZTOOL_P1) || defined (ZTOOL_P2)
    309          
    310          #if defined(SERIAL_DEBUG_SUPPORTED)
    311                debug_str( (uint8*)buf );
    312          #endif //LCD_SUPPORTED
    313          
    314          #endif //ZTOOL_P1
    315          
    316                /* Free mem */
    317                osal_mem_free( buf );
   \   0000FC                ; Setup parameters for call to function osal_mem_free
   \   0000FC   AA..         MOV     R2,?V0 + 0
   \   0000FE   AB..         MOV     R3,?V0 + 1
   \   000100   12....       LCALL   ??osal_mem_free?relay
    318              }
    319            }
    320          
    321            /* Display the string */
    322            HalLcd_HW_WriteLine (option, str);
   \                     ??HalLcdWriteString_3:
   \   000103                ; Setup parameters for call to function HalLcd_HW_WriteLine
   \   000103   EE           MOV     A,R6
   \   000104   FA           MOV     R2,A
   \   000105   EF           MOV     A,R7
   \   000106   FB           MOV     R3,A
   \   000107   A9..         MOV     R1,?V0 + 8
   \   000109   12....       LCALL   ??HalLcd_HW_WriteLine?relay
    323          
    324          #endif //HAL_LCD
    325          
    326          }
   \   00010C   7F09         MOV     R7,#0x9
   \   00010E   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   12....       LCALL   ??osal_strlen?relay
   \   000003   EA           MOV     A,R2
   \   000004   F5..         MOV     ?V0 + 2,A
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine10_0:
   \   000000   12....       LCALL   ??osal_memcpy?relay
   \   000003   7403         MOV     A,#0x3
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine12_0:
   \   000000   3400         ADDC    A,#0x0
   \   000002   F583         MOV     DPH,A
   \   000004   7420         MOV     A,#0x20
   \   000006   F0           MOVX    @DPTR,A
   \   000007   22           RET
    327          
    328          /**************************************************************************************************
    329           * @fn      HalLcdWriteValue
    330           *
    331           * @brief   Write a value to the LCD
    332           *
    333           * @param   value  - value that will be displayed
    334           *          radix  - 8, 10, 16
    335           *          option - display options
    336           *
    337           * @return  None
    338           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    339          void HalLcdWriteValue ( uint32 value, const uint8 radix, uint8 option)
   \                     HalLcdWriteValue:
    340          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 25
   \   000005   74E7         MOV     A,#-0x19
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   7429         MOV     A,#0x29
   \   00000C   12....       LCALL   ?XSTACK_DISP0_8
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   FE           MOV     R6,A
    341          #if (HAL_LCD == TRUE)
    342            uint8 buf[LCD_MAX_BUF];
    343          
    344            _ltoa( value, &buf[0], radix );
   \   000011                ; Setup parameters for call to function _ltoa
   \   000011   85..82       MOV     DPL,?XSP + 0
   \   000014   85..83       MOV     DPH,?XSP + 1
   \   000017   8582..       MOV     ?V0 + 0,DPL
   \   00001A   8583..       MOV     ?V0 + 1,DPH
   \   00001D   78..         MOV     R0,#?V0 + 0
   \   00001F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000022   12....       LCALL   ??Subroutine9_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_9:
   \   000025   12....       LCALL   ?DEALLOC_XSTACK8
    345            HalLcdWriteString( (char*)buf, option );
   \   000028                ; Setup parameters for call to function HalLcdWriteString
   \   000028   EE           MOV     A,R6
   \   000029   F9           MOV     R1,A
   \   00002A   85..82       MOV     DPL,?XSP + 0
   \   00002D   85..83       MOV     DPH,?XSP + 1
   \   000030   AA82         MOV     R2,DPL
   \   000032   AB83         MOV     R3,DPH
   \   000034   12....       LCALL   ??HalLcdWriteString?relay
    346          #endif
    347          }
   \   000037   7419         MOV     A,#0x19
   \   000039   12....       LCALL   ?DEALLOC_XSTACK8
   \   00003C   7F08         MOV     R7,#0x8
   \   00003E   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine9_0:
   \   000000   12....       LCALL   ??_ltoa?relay
   \   000003   7402         MOV     A,#0x2
   \   000005   22           RET
    348          
    349          /**************************************************************************************************
    350           * @fn      HalLcdWriteScreen
    351           *
    352           * @brief   Write a value to the LCD
    353           *
    354           * @param   line1  - string that will be displayed on line 1
    355           *          line2  - string that will be displayed on line 2
    356           *
    357           * @return  None
    358           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    359          void HalLcdWriteScreen( char *line1, char *line2 )
   \                     HalLcdWriteScreen:
    360          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   EC           MOV     A,R4
   \   000006   FE           MOV     R6,A
   \   000007   ED           MOV     A,R5
   \   000008   FF           MOV     R7,A
    361          #if (HAL_LCD == TRUE)
    362            HalLcdWriteString( line1, 1 );
   \   000009                ; Setup parameters for call to function HalLcdWriteString
   \   000009   7901         MOV     R1,#0x1
   \   00000B   12....       LCALL   ??HalLcdWriteString?relay
    363            HalLcdWriteString( line2, 2 );
   \   00000E                ; Setup parameters for call to function HalLcdWriteString
   \   00000E   7902         MOV     R1,#0x2
   \   000010   EE           MOV     A,R6
   \   000011   FA           MOV     R2,A
   \   000012   EF           MOV     A,R7
   \   000013   FB           MOV     R3,A
   \   000014   12....       LCALL   ??HalLcdWriteString?relay
    364          #endif
    365          }
   \   000017   02....       LJMP    ?Subroutine2 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   7F01         MOV     R7,#0x1
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    366          
    367          /**************************************************************************************************
    368           * @fn      HalLcdWriteStringValue
    369           *
    370           * @brief   Write a string followed by a value to the LCD
    371           *
    372           * @param   title  - Title that will be displayed before the value
    373           *          value  - value
    374           *          format - redix
    375           *          line   - line number
    376           *
    377           * @return  None
    378           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    379          void HalLcdWriteStringValue( char *title, uint16 value, uint8 format, uint8 line )
   \                     HalLcdWriteStringValue:
    380          {
   \   000000   74EE         MOV     A,#-0x12
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 18
   \   000005                ; Auto size: 25
   \   000005   74E7         MOV     A,#-0x19
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   \   00000E   8C..         MOV     ?V0 + 8,R4
   \   000010   8D..         MOV     ?V0 + 9,R5
   \   000012   89..         MOV     ?V0 + 0,R1
   \   000014   742B         MOV     A,#0x2b
   \   000016   12....       LCALL   ?XSTACK_DISP0_8
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   F5..         MOV     ?V0 + 1,A
    381          #if (HAL_LCD == TRUE)
    382            uint8 tmpLen;
    383            uint8 buf[LCD_MAX_BUF];
    384            uint32 err;
    385          
    386            tmpLen = (uint8)osal_strlen( (char*)title );
   \   00001C                ; Setup parameters for call to function osal_strlen
   \   00001C   12....       LCALL   ?Subroutine6 & 0xFFFF
    387            osal_memcpy( buf, title, tmpLen );
   \                     ??CrossCallReturnLabel_1:
   \   00001F                ; Setup parameters for call to function osal_memcpy
   \   00001F   8E..         MOV     ?V0 + 4,R6
   \   000021   8F..         MOV     ?V0 + 5,R7
   \   000023   75..00       MOV     ?V0 + 6,#0x0
   \   000026   78..         MOV     R0,#?V0 + 4
   \   000028   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00002B   8A..         MOV     ?V0 + 4,R2
   \   00002D   AC..         MOV     R4,?V0 + 4
   \   00002F   7D00         MOV     R5,#0x0
   \   000031   7403         MOV     A,#0x3
   \   000033   12....       LCALL   ?XSTACK_DISP0_8
   \   000036   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_10:
   \   000039   12....       LCALL   ?DEALLOC_XSTACK8
    388            buf[tmpLen] = ' ';
   \   00003C   12....       LCALL   ?Subroutine3 & 0xFFFF
    389            err = (uint32)(value);
    390            _ltoa( err, &buf[tmpLen+1], format );
   \                     ??CrossCallReturnLabel_18:
   \   00003F                ; Setup parameters for call to function _ltoa
   \   00003F   A3           INC     DPTR
   \   000040   8582..       MOV     ?V0 + 2,DPL
   \   000043   8583..       MOV     ?V0 + 3,DPH
   \   000046   78..         MOV     R0,#?V0 + 2
   \   000048   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00004B   A9..         MOV     R1,?V0 + 0
   \   00004D   AA..         MOV     R2,?V0 + 8
   \   00004F   AB..         MOV     R3,?V0 + 9
   \   000051   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   000054   12....       LCALL   ?DEALLOC_XSTACK8
    391            HalLcdWriteString( (char*)buf, line );		
   \   000057                ; Setup parameters for call to function HalLcdWriteString
   \   000057   A9..         MOV     R1,?V0 + 1
   \   000059   85..82       MOV     DPL,?XSP + 0
   \   00005C   85..83       MOV     DPH,?XSP + 1
   \   00005F   AA82         MOV     R2,DPL
   \   000061   AB83         MOV     R3,DPH
   \   000063   12....       LCALL   ??HalLcdWriteString?relay
    392          #endif
    393          }
   \   000066   7419         MOV     A,#0x19
   \   000068   12....       LCALL   ?DEALLOC_XSTACK8
   \   00006B   7F0A         MOV     R7,#0xa
   \   00006D   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   E4           CLR     A
   \   000001                REQUIRE ??Subroutine8_0
   \   000001                ; // Fall through to label ??Subroutine8_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine8_0:
   \   000000   FC           MOV     R4,A
   \   000001   FD           MOV     R5,A
   \   000002                REQUIRE ??Subroutine9_0
   \   000002                ; // Fall through to label ??Subroutine9_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   AA82         MOV     R2,DPL
   \   000002   AB83         MOV     R3,DPH
   \   000004                REQUIRE ??Subroutine10_0
   \   000004                ; // Fall through to label ??Subroutine10_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   85..82       MOV     DPL,?XSP + 0
   \   000003   85..83       MOV     DPH,?XSP + 1
   \   000006   E582         MOV     A,DPL
   \   000008   25..         ADD     A,?V0 + 2
   \   00000A                REQUIRE ??Subroutine11_0
   \   00000A                ; // Fall through to label ??Subroutine11_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine11_0:
   \   000000   F582         MOV     DPL,A
   \   000002   E583         MOV     A,DPH
   \   000004                REQUIRE ??Subroutine12_0
   \   000004                ; // Fall through to label ??Subroutine12_0
    394          
    395          /**************************************************************************************************
    396           * @fn      HalLcdWriteStringValue
    397           *
    398           * @brief   Write a string followed by a value to the LCD
    399           *
    400           * @param   title   - Title that will be displayed before the value
    401           *          value1  - value #1
    402           *          format1 - redix of value #1
    403           *          value2  - value #2
    404           *          format2 - redix of value #2
    405           *          line    - line number
    406           *
    407           * @return  None
    408           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    409          void HalLcdWriteStringValueValue( char *title, uint16 value1, uint8 format1,
   \                     HalLcdWriteStringValueValue:
    410                                            uint16 value2, uint8 format2, uint8 line )
    411          {
   \   000000   74ED         MOV     A,#-0x13
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 19
   \   000005                ; Auto size: 25
   \   000005   74E7         MOV     A,#-0x19
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   \   00000E   8C..         MOV     ?V0 + 2,R4
   \   000010   8D..         MOV     ?V0 + 3,R5
   \   000012   89..         MOV     ?V0 + 5,R1
   \   000014   742C         MOV     A,#0x2c
   \   000016   12....       LCALL   ?XSTACK_DISP0_8
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   F5..         MOV     ?V0 + 0,A
   \   00001C   A3           INC     DPTR
   \   00001D   E0           MOVX    A,@DPTR
   \   00001E   F5..         MOV     ?V0 + 1,A
   \   000020   742E         MOV     A,#0x2e
   \   000022   12....       LCALL   ?XSTACK_DISP0_8
   \   000025   E0           MOVX    A,@DPTR
   \   000026   F5..         MOV     ?V0 + 4,A
   \   000028   742F         MOV     A,#0x2f
   \   00002A   12....       LCALL   ?XSTACK_DISP0_8
   \   00002D   E0           MOVX    A,@DPTR
   \   00002E   F5..         MOV     ?V0 + 7,A
    412          
    413          #if (HAL_LCD == TRUE)
    414          
    415            uint8 tmpLen;
    416            uint8 buf[LCD_MAX_BUF];
    417            uint32 err;
    418          
    419            tmpLen = (uint8)osal_strlen( (char*)title );
   \   000030                ; Setup parameters for call to function osal_strlen
   \   000030   12....       LCALL   ??osal_strlen?relay
   \   000033   EA           MOV     A,R2
   \   000034   F5..         MOV     ?V0 + 6,A
    420            if ( tmpLen )
   \   000036   602C         JZ      ??HalLcdWriteStringValueValue_0
    421            {
    422              osal_memcpy( buf, title, tmpLen );
   \   000038                ; Setup parameters for call to function osal_memcpy
   \   000038   8E..         MOV     ?V0 + 8,R6
   \   00003A   8F..         MOV     ?V0 + 9,R7
   \   00003C   75..00       MOV     ?V0 + 10,#0x0
   \   00003F   78..         MOV     R0,#?V0 + 8
   \   000041   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000044   8A..         MOV     ?V0 + 8,R2
   \   000046   AC..         MOV     R4,?V0 + 8
   \   000048   7D00         MOV     R5,#0x0
   \   00004A   7403         MOV     A,#0x3
   \   00004C   12....       LCALL   ?XSTACK_DISP0_8
   \   00004F   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_11:
   \   000052   12....       LCALL   ?DEALLOC_XSTACK8
    423              buf[tmpLen++] = ' ';
   \   000055   85..82       MOV     DPL,?XSP + 0
   \   000058   85..83       MOV     DPH,?XSP + 1
   \   00005B   E582         MOV     A,DPL
   \   00005D   25..         ADD     A,?V0 + 8
   \   00005F   12....       LCALL   ??Subroutine11_0 & 0xFFFF
    424            }
   \                     ??CrossCallReturnLabel_17:
   \   000062   05..         INC     ?V0 + 6
    425          
    426            err = (uint32)(value1);
    427            _ltoa( err, &buf[tmpLen], format1 );
   \                     ??HalLcdWriteStringValueValue_0:
   \   000064                ; Setup parameters for call to function _ltoa
   \   000064   85....       MOV     ?V0 + 8,?V0 + 6
   \   000067   85..82       MOV     DPL,?XSP + 0
   \   00006A   85..83       MOV     DPH,?XSP + 1
   \   00006D   E582         MOV     A,DPL
   \   00006F   25..         ADD     A,?V0 + 8
   \   000071   F5..         MOV     ?V0 + 8,A
   \   000073   E583         MOV     A,DPH
   \   000075   3400         ADDC    A,#0x0
   \   000077   F5..         MOV     ?V0 + 9,A
   \   000079   78..         MOV     R0,#?V0 + 8
   \   00007B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00007E   A9..         MOV     R1,?V0 + 5
   \   000080   AA..         MOV     R2,?V0 + 2
   \   000082   AB..         MOV     R3,?V0 + 3
   \   000084   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   000087   12....       LCALL   ?DEALLOC_XSTACK8
    428            tmpLen = (uint8)osal_strlen( (char*)buf );
   \   00008A                ; Setup parameters for call to function osal_strlen
   \   00008A   85..82       MOV     DPL,?XSP + 0
   \   00008D   85..83       MOV     DPH,?XSP + 1
   \   000090   AA82         MOV     R2,DPL
   \   000092   AB83         MOV     R3,DPH
   \   000094   12....       LCALL   ??osal_strlen?relay
   \   000097   EA           MOV     A,R2
   \   000098   F5..         MOV     ?V0 + 6,A
    429          
    430            buf[tmpLen++] = ',';
   \   00009A   F5..         MOV     ?V0 + 2,A
   \   00009C   85..82       MOV     DPL,?XSP + 0
   \   00009F   85..83       MOV     DPH,?XSP + 1
   \   0000A2   E582         MOV     A,DPL
   \   0000A4   25..         ADD     A,?V0 + 2
   \   0000A6   F582         MOV     DPL,A
   \   0000A8   E583         MOV     A,DPH
   \   0000AA   3400         ADDC    A,#0x0
   \   0000AC   F583         MOV     DPH,A
   \   0000AE   742C         MOV     A,#0x2c
   \   0000B0   F0           MOVX    @DPTR,A
   \   0000B1   05..         INC     ?V0 + 6
    431            buf[tmpLen++] = ' ';
   \   0000B3   85....       MOV     ?V0 + 2,?V0 + 6
   \   0000B6   12....       LCALL   ?Subroutine3 & 0xFFFF
    432            err = (uint32)(value2);
    433            _ltoa( err, &buf[tmpLen], format2 );
   \                     ??CrossCallReturnLabel_19:
   \   0000B9                ; Setup parameters for call to function _ltoa
   \   0000B9   7401         MOV     A,#0x1
   \   0000BB   25..         ADD     A,?V0 + 6
   \   0000BD   F8           MOV     R0,A
   \   0000BE   85..82       MOV     DPL,?XSP + 0
   \   0000C1   85..83       MOV     DPH,?XSP + 1
   \   0000C4   E582         MOV     A,DPL
   \   0000C6   28           ADD     A,R0
   \   0000C7   F5..         MOV     ?V0 + 2,A
   \   0000C9   E583         MOV     A,DPH
   \   0000CB   3400         ADDC    A,#0x0
   \   0000CD   F5..         MOV     ?V0 + 3,A
   \   0000CF   78..         MOV     R0,#?V0 + 2
   \   0000D1   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000D4   A9..         MOV     R1,?V0 + 4
   \   0000D6   AA..         MOV     R2,?V0 + 0
   \   0000D8   AB..         MOV     R3,?V0 + 1
   \   0000DA   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   0000DD   12....       LCALL   ?DEALLOC_XSTACK8
    434          
    435            HalLcdWriteString( (char *)buf, line );		
   \   0000E0                ; Setup parameters for call to function HalLcdWriteString
   \   0000E0   A9..         MOV     R1,?V0 + 7
   \   0000E2   85..82       MOV     DPL,?XSP + 0
   \   0000E5   85..83       MOV     DPH,?XSP + 1
   \   0000E8   AA82         MOV     R2,DPL
   \   0000EA   AB83         MOV     R3,DPH
   \   0000EC   12....       LCALL   ??HalLcdWriteString?relay
    436          
    437          #endif
    438          }
   \   0000EF   7419         MOV     A,#0x19
   \   0000F1   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000F4   7F0B         MOV     R7,#0xb
   \   0000F6   02....       LJMP    ?BANKED_LEAVE_XDATA
    439          
    440          /**************************************************************************************************
    441           * @fn      HalLcdDisplayPercentBar
    442           *
    443           * @brief   Display percentage bar on the LCD
    444           *
    445           * @param   title   -
    446           *          value   -
    447           *
    448           * @return  None
    449           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    450          void HalLcdDisplayPercentBar( char *title, uint8 value )
   \                     HalLcdDisplayPercentBar:
    451          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 17
   \   000005   74EF         MOV     A,#-0x11
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
    452          #if (HAL_LCD == TRUE)
    453          
    454            uint8 percent;
    455            uint8 leftOver;
    456            uint8 buf[17];
    457            uint32 err;
    458            uint8 x;
    459          
    460            /* Write the title: */
    461            HalLcdWriteString( title, HAL_LCD_LINE_1 );
   \   00000C                ; Setup parameters for call to function HalLcdWriteString
   \   00000C   7901         MOV     R1,#0x1
   \   00000E   12....       LCALL   ??HalLcdWriteString?relay
    462          
    463            if ( value > 100 )
   \   000011   EE           MOV     A,R6
   \   000012   C3           CLR     C
   \   000013   9465         SUBB    A,#0x65
   \   000015   4002         JC      ??HalLcdDisplayPercentBar_0
    464              value = 100;
   \   000017   7E64         MOV     R6,#0x64
    465          
    466            /* convert to blocks */
    467            percent = (uint8)(value / 10);
   \                     ??HalLcdDisplayPercentBar_0:
   \   000019   75F00A       MOV     B,#0xa
   \   00001C   EE           MOV     A,R6
   \   00001D   84           DIV     AB
   \   00001E   F5..         MOV     ?V0 + 3,A
    468            leftOver = (uint8)(value % 10);
   \   000020   EE           MOV     A,R6
   \   000021   75F00A       MOV     B,#0xa
   \   000024   84           DIV     AB
   \   000025   AFF0         MOV     R7,B
    469          
    470            /* Make window */
    471            osal_memcpy( buf, "[          ]  ", 15 );
   \   000027                ; Setup parameters for call to function osal_memcpy
   \   000027   75....       MOV     ?V0 + 0,#`?<Constant "[          ]  ">` & 0xff
   \   00002A   75....       MOV     ?V0 + 1,#(`?<Constant "[          ]  ">` >> 8) & 0xff
   \   00002D   75..00       MOV     ?V0 + 2,#0x0
   \   000030   78..         MOV     R0,#?V0 + 0
   \   000032   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000035   7C0F         MOV     R4,#0xf
   \   000037   7D00         MOV     R5,#0x0
   \   000039   7403         MOV     A,#0x3
   \   00003B   12....       LCALL   ?XSTACK_DISP0_8
   \   00003E   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_12:
   \   000041   12....       LCALL   ?DEALLOC_XSTACK8
    472          
    473            for ( x = 0; x < percent; x ++ )
   \   000044   E5..         MOV     A,?V0 + 3
   \   000046   601B         JZ      ??HalLcdDisplayPercentBar_1
    474            {
    475              buf[1+x] = '>';
   \   000048   F8           MOV     R0,A
   \   000049   7900         MOV     R1,#0x0
   \   00004B   7A3E         MOV     R2,#0x3e
   \   00004D   7401         MOV     A,#0x1
   \   00004F   12....       LCALL   ?XSTACK_DISP0_8
   \                     ??HalLcdDisplayPercentBar_2:
   \   000052   EA           MOV     A,R2
   \   000053   F0           MOVX    @DPTR,A
   \   000054   A3           INC     DPTR
   \   000055   E8           MOV     A,R0
   \   000056   24FF         ADD     A,#-0x1
   \   000058   18           DEC     R0
   \   000059   E9           MOV     A,R1
   \   00005A   34FF         ADDC    A,#-0x1
   \   00005C   F9           MOV     R1,A
   \   00005D   48           ORL     A,R0
   \   00005E   70F2         JNZ     ??HalLcdDisplayPercentBar_2
    476            }
   \   000060   85....       MOV     ?V0 + 2,?V0 + 3
    477          
    478            if ( leftOver >= 5 )
   \                     ??HalLcdDisplayPercentBar_1:
   \   000063   EF           MOV     A,R7
   \   000064   C3           CLR     C
   \   000065   9405         SUBB    A,#0x5
   \   000067   4019         JC      ??HalLcdDisplayPercentBar_3
    479              buf[1+x] = '+';
   \   000069   85....       MOV     ?V0 + 0,?V0 + 2
   \   00006C   85..82       MOV     DPL,?XSP + 0
   \   00006F   85..83       MOV     DPH,?XSP + 1
   \   000072   E582         MOV     A,DPL
   \   000074   25..         ADD     A,?V0 + 0
   \   000076   F582         MOV     DPL,A
   \   000078   E583         MOV     A,DPH
   \   00007A   3400         ADDC    A,#0x0
   \   00007C   F583         MOV     DPH,A
   \   00007E   A3           INC     DPTR
   \   00007F   742B         MOV     A,#0x2b
   \   000081   F0           MOVX    @DPTR,A
    480          
    481            err = (uint32)value;
    482            _ltoa( err, (uint8*)&buf[13], 10 );
   \                     ??HalLcdDisplayPercentBar_3:
   \   000082                ; Setup parameters for call to function _ltoa
   \   000082   740D         MOV     A,#0xd
   \   000084   12....       LCALL   ?XSTACK_DISP0_8
   \   000087   8582..       MOV     ?V0 + 0,DPL
   \   00008A   8583..       MOV     ?V0 + 1,DPH
   \   00008D   78..         MOV     R0,#?V0 + 0
   \   00008F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000092   790A         MOV     R1,#0xa
   \   000094   EE           MOV     A,R6
   \   000095   FA           MOV     R2,A
   \   000096   E4           CLR     A
   \   000097   FB           MOV     R3,A
   \   000098   12....       LCALL   ??Subroutine8_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   00009B   12....       LCALL   ?DEALLOC_XSTACK8
    483          
    484            HalLcdWriteString( (char*)buf, HAL_LCD_LINE_2 );
   \   00009E                ; Setup parameters for call to function HalLcdWriteString
   \   00009E   7902         MOV     R1,#0x2
   \   0000A0   85..82       MOV     DPL,?XSP + 0
   \   0000A3   85..83       MOV     DPH,?XSP + 1
   \   0000A6   AA82         MOV     R2,DPL
   \   0000A8   AB83         MOV     R3,DPH
   \   0000AA   12....       LCALL   ??HalLcdWriteString?relay
    485          
    486          #endif
    487          
    488          }
   \   0000AD   7411         MOV     A,#0x11
   \   0000AF   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000B2   7F04         MOV     R7,#0x4
   \   0000B4   02....       LJMP    ?BANKED_LEAVE_XDATA
    489          
    490          #if (HAL_LCD == TRUE)
    491          /**************************************************************************************************
    492           *                                    HARDWARE LCD
    493           **************************************************************************************************/
    494          
    495          /**************************************************************************************************
    496           * @fn      halLcd_ConfigIO
    497           *
    498           * @brief   Configure IO lines needed for LCD control.
    499           *
    500           * @param   None
    501           *
    502           * @return  None
    503           **************************************************************************************************/
    504          static void halLcd_ConfigIO(void)
    505          {
    506            /* GPIO configuration */
    507            HAL_CONFIG_IO_OUTPUT(HAL_LCD_MODE_PORT,  HAL_LCD_MODE_PIN,  1);
    508            HAL_CONFIG_IO_OUTPUT(HAL_LCD_RESET_PORT, HAL_LCD_RESET_PIN, 1);
    509            HAL_CONFIG_IO_OUTPUT(HAL_LCD_CS_PORT,    HAL_LCD_CS_PIN,    1);
    510          }
    511          
    512          /**************************************************************************************************
    513           * @fn      halLcd_ConfigSPI
    514           *
    515           * @brief   Configure SPI lines needed for talking to LCD.
    516           *
    517           * @param   None
    518           *
    519           * @return  None
    520           **************************************************************************************************/
    521          static void halLcd_ConfigSPI(void)
    522          {
    523            /* UART/SPI Peripheral configuration */
    524          
    525             uint8 baud_exponent;
    526             uint8 baud_mantissa;
    527          
    528            /* Set SPI on UART 1 alternative 2 */
    529            PERCFG |= 0x02;
    530          
    531            /* Configure clk, master out and master in lines */
    532            HAL_CONFIG_IO_PERIPHERAL(HAL_LCD_CLK_PORT,  HAL_LCD_CLK_PIN);
    533            HAL_CONFIG_IO_PERIPHERAL(HAL_LCD_MOSI_PORT, HAL_LCD_MOSI_PIN);
    534            HAL_CONFIG_IO_PERIPHERAL(HAL_LCD_MISO_PORT, HAL_LCD_MISO_PIN);
    535          
    536          
    537            /* Set SPI speed to 1 MHz (the values assume system clk of 32MHz)
    538             * Confirm on board that this results in 1MHz spi clk.
    539             */
    540            baud_exponent = 15;
    541            baud_mantissa =  0;
    542          
    543            /* Configure SPI */
    544            U1UCR  = 0x80;      /* Flush and goto IDLE state. 8-N-1. */
    545            U1CSR  = 0x00;      /* SPI mode, master. */
    546            U1GCR  = HAL_SPI_TRANSFER_MSB_FIRST | HAL_SPI_CLOCK_PHA_0 | HAL_SPI_CLOCK_POL_LO | baud_exponent;
    547            U1BAUD = baud_mantissa;
    548          }
    549          
    550          /**************************************************************************************************
    551           * @fn      HalLcd_HW_Init
    552           *
    553           * @brief   Initilize HW LCD Driver.
    554           *
    555           * @param   None
    556           *
    557           * @return  None
    558           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    559          void HalLcd_HW_Init(void)
   \                     HalLcd_HW_Init:
    560          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    561            /* Initialize LCD IO lines */
    562            halLcd_ConfigIO();
   \   000004   53F3FE       ANL     0xf3,#0xfe
   \   000007   D280         SETB    0x80.0
   \   000009   43FD01       ORL     0xfd,#0x1
   \   00000C   53F4FD       ANL     0xf4,#0xfd
   \   00000F   D291         SETB    0x90.1
   \   000011   43FE02       ORL     0xfe,#0x2
   \   000014   53F4FB       ANL     0xf4,#0xfb
   \   000017   D292         SETB    0x90.2
   \   000019   43FE04       ORL     0xfe,#0x4
    563          
    564            /* Initialize SPI */
    565            halLcd_ConfigSPI();
   \   00001C   43F102       ORL     0xf1,#0x2
   \   00001F   43F420       ORL     0xf4,#0x20
   \   000022   43F440       ORL     0xf4,#0x40
   \   000025   43F480       ORL     0xf4,#0x80
   \   000028   75FB80       MOV     0xfb,#-0x80
   \   00002B   75F800       MOV     0xf8,#0x0
   \   00002E   75FC2F       MOV     0xfc,#0x2f
   \   000031   75FA00       MOV     0xfa,#0x0
    566          
    567            /* Perform reset */
    568            LCD_ACTIVATE_RESET();
   \   000034   C291         CLR     0x90.1
    569            HalLcd_HW_WaitUs(15000); // 15 ms
   \   000036                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   000036   7A98         MOV     R2,#-0x68
   \   000038   7B3A         MOV     R3,#0x3a
   \   00003A   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    570            LCD_RELEASE_RESET();
   \   00003D   D291         SETB    0x90.1
    571            HalLcd_HW_WaitUs(15); // 15 us
   \   00003F                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   00003F   7A0F         MOV     R2,#0xf
   \   000041   7B00         MOV     R3,#0x0
   \   000043   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    572          
    573            /* Perform the initialization sequence */
    574            FUNCTION_SET(CGRAM | COM_FORWARD | THREE_LINE);
   \   000046                ; Setup parameters for call to function HalLcd_HW_Control
   \   000046   7915         MOV     R1,#0x15
   \   000048   12....       LCALL   ??HalLcd_HW_Control?relay
    575          
    576            /* Set contrast */
    577            HalLcd_HW_SetContrast(15);
   \   00004B                ; Setup parameters for call to function HalLcd_HW_SetContrast
   \   00004B   790F         MOV     R1,#0xf
   \   00004D   12....       LCALL   ??HalLcd_HW_SetContrast?relay
    578          
    579            /* Set power */
    580            SET_POWER_SAVE_MODE(OSC_OFF | POWER_SAVE_ON);
   \   000050                ; Setup parameters for call to function HalLcd_HW_Control
   \   000050   790E         MOV     R1,#0xe
   \   000052   12....       LCALL   ??HalLcd_HW_Control?relay
    581            SET_POWER_CTRL(VOLTAGE_DIVIDER_ON | CONVERTER_AND_REG_ON);
   \   000055                ; Setup parameters for call to function HalLcd_HW_Control
   \   000055   7925         MOV     R1,#0x25
   \   000057   12....       LCALL   ??HalLcd_HW_Control?relay
    582            SET_BIAS_CTRL(BIAS_1_5);
   \   00005A                ; Setup parameters for call to function HalLcd_HW_Control
   \   00005A   791C         MOV     R1,#0x1c
   \   00005C   12....       LCALL   ??HalLcd_HW_Control?relay
    583            HalLcd_HW_WaitUs(21000);// 21 ms
   \   00005F                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   00005F   7A08         MOV     R2,#0x8
   \   000061   7B52         MOV     R3,#0x52
   \   000063   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    584          
    585            /* Clear the display */
    586            HalLcd_HW_Clear();
   \   000066                ; Setup parameters for call to function HalLcd_HW_Clear
   \   000066   12....       LCALL   ??HalLcd_HW_Clear?relay
    587            HalLcd_HW_ClearAllSpecChars();
   \   000069                ; Setup parameters for call to function HalLcd_HW_ClearAllSpecChars
   \   000069   12....       LCALL   ??HalLcd_HW_ClearAllSpecChars?relay
    588            SET_DISPLAY_CTRL(DISPLAY_CTRL_ON | DISPLAY_CTRL_BLINK_OFF | DISPLAY_CTRL_CURSOR_OFF);
   \   00006C                ; Setup parameters for call to function HalLcd_HW_Control
   \   00006C   7929         MOV     R1,#0x29
   \   00006E   12....       LCALL   ??HalLcd_HW_Control?relay
    589          }
   \   000071   02....       LJMP    ?Subroutine1 & 0xFFFF
   \   000074                REQUIRE _A_P1
   \   000074                REQUIRE PERCFG
   \   000074                REQUIRE P1SEL
   \   000074                REQUIRE U1UCR
   \   000074                REQUIRE _A_U1CSR
   \   000074                REQUIRE U1GCR
   \   000074                REQUIRE U1BAUD
   \   000074                REQUIRE P0SEL
   \   000074                REQUIRE _A_P0
   \   000074                REQUIRE P0DIR
   \   000074                REQUIRE P1DIR
    590          
    591          /**************************************************************************************************
    592           * @fn      HalLcd_HW_Control
    593           *
    594           * @brief   Write 1 command to the LCD
    595           *
    596           * @param   uint8 cmd - command to be written to the LCD
    597           *
    598           * @return  None
    599           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    600          void HalLcd_HW_Control(uint8 cmd)
   \                     HalLcd_HW_Control:
    601          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    602            LCD_SPI_BEGIN();
   \   000000   C292         CLR     0x90.2
    603            LCD_DO_CONTROL();
   \   000002   C280         CLR     0x80.0
    604            LCD_SPI_TX(cmd);
   \   000004   53F8F9       ANL     0xf8,#0xf9
   \   000007   89F9         MOV     0xf9,R1
   \                     ??HalLcd_HW_Control_0:
   \   000009   A2F9         MOV     C,0xf8.1
   \   00000B   50FC         JNC     ??HalLcd_HW_Control_0
    605            LCD_SPI_WAIT_RXRDY();
   \                     ??HalLcd_HW_Control_1:
   \   00000D   A2F9         MOV     C,0xf8.1
   \   00000F   50FC         JNC     ??HalLcd_HW_Control_1
    606            LCD_SPI_END();
   \   000011                REQUIRE ?Subroutine0
   \   000011                REQUIRE _A_P1
   \   000011                REQUIRE _A_P0
   \   000011                REQUIRE _A_U1CSR
   \   000011                REQUIRE U1DBUF
   \   000011                ; // Fall through to label ?Subroutine0
    607          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   00           NOP
   \   000001   00           NOP
   \   000002   00           NOP
   \   000003   00           NOP
   \   000004   D292         SETB    0x90.2
   \   000006   02....       LJMP    ?BRET
    608          
    609          /**************************************************************************************************
    610           * @fn      HalLcd_HW_Write
    611           *
    612           * @brief   Write 1 byte to the LCD
    613           *
    614           * @param   uint8 data - data to be written to the LCD
    615           *
    616           * @return  None
    617           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    618          void HalLcd_HW_Write(uint8 data)
   \                     HalLcd_HW_Write:
    619          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    620            LCD_SPI_BEGIN();
   \   000000   C292         CLR     0x90.2
    621            LCD_DO_WRITE();
   \   000002   D280         SETB    0x80.0
    622            LCD_SPI_TX(data);
   \   000004   53F8F9       ANL     0xf8,#0xf9
   \   000007   89F9         MOV     0xf9,R1
   \                     ??HalLcd_HW_Write_0:
   \   000009   A2F9         MOV     C,0xf8.1
   \   00000B   50FC         JNC     ??HalLcd_HW_Write_0
    623            LCD_SPI_WAIT_RXRDY();
   \                     ??HalLcd_HW_Write_1:
   \   00000D   A2F9         MOV     C,0xf8.1
   \   00000F   50FC         JNC     ??HalLcd_HW_Write_1
    624            LCD_SPI_END();
   \   000011   80..         SJMP    ?Subroutine0
   \   000013                REQUIRE _A_P1
   \   000013                REQUIRE _A_P0
   \   000013                REQUIRE _A_U1CSR
   \   000013                REQUIRE U1DBUF
    625          }
    626          
    627          /**************************************************************************************************
    628           * @fn          HalLcd_HW_SetContrast
    629           *
    630           * @brief       Set display contrast
    631           *
    632           * @param       uint8 value - contrast value
    633           *
    634           * @return      none
    635           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    636          void HalLcd_HW_SetContrast(uint8 value)
   \                     HalLcd_HW_SetContrast:
    637          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    638            SET_ICONRAM_ADDR(CONTRAST_CTRL_REGISTER);
   \   000007                ; Setup parameters for call to function HalLcd_HW_Control
   \   000007   7950         MOV     R1,#0x50
   \   000009   12....       LCALL   ?Subroutine7 & 0xFFFF
    639            HalLcd_HW_Write(value);
    640          }
   \                     ??CrossCallReturnLabel_3:
   \   00000C   80..         SJMP    ?Subroutine2

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   12....       LCALL   ??HalLcd_HW_Control?relay
   \   000003                ; Setup parameters for call to function HalLcd_HW_Write
   \   000003                ; Setup parameters for call to function HalLcd_HW_Write
   \   000003   EE           MOV     A,R6
   \   000004   F9           MOV     R1,A
   \   000005   12....       LCALL   ??HalLcd_HW_Write?relay
   \   000008   22           RET
    641          
    642          /**************************************************************************************************
    643           * @fn      HalLcd_HW_Clear
    644           *
    645           * @brief   Clear the HW LCD
    646           *
    647           * @param   None
    648           *
    649           * @return  None
    650           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    651          void HalLcd_HW_Clear(void)
   \                     HalLcd_HW_Clear:
    652          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
    653            uint8 n;
    654          
    655            SET_DDRAM_ADDR(0x00);
   \   000005                ; Setup parameters for call to function HalLcd_HW_Control
   \   000005   7980         MOV     R1,#-0x80
   \   000007   12....       LCALL   ??HalLcd_HW_Control?relay
    656            for (n = 0; n < (LCD_MAX_LINE_COUNT * LCD_MAX_LINE_LENGTH); n++)
   \   00000A   7E30         MOV     R6,#0x30
    657            {
    658              HalLcd_HW_Write(' ');
   \                     ??HalLcd_HW_Clear_0:
   \   00000C                ; Setup parameters for call to function HalLcd_HW_Write
   \   00000C   7920         MOV     R1,#0x20
   \   00000E   12....       LCALL   ??HalLcd_HW_Write?relay
    659            }
   \   000011   1E           DEC     R6
   \   000012   EE           MOV     A,R6
   \   000013   70F7         JNZ     ??HalLcd_HW_Clear_0
    660          }
   \   000015                REQUIRE ?Subroutine2
   \   000015                ; // Fall through to label ?Subroutine2
    661          
    662          /**************************************************************************************************
    663           * @fn      HalLcd_HW_ClearAllSpecChars
    664           *
    665           * @brief   Clear all special chars
    666           *
    667           * @param   None
    668           *
    669           * @return  None
    670           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    671          void HalLcd_HW_ClearAllSpecChars(void)
   \                     HalLcd_HW_ClearAllSpecChars:
    672          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
    673            uint8 n = 0;
    674          
    675            SET_GCRAM_CHAR(0);
   \   000005                ; Setup parameters for call to function HalLcd_HW_Control
   \   000005   79C0         MOV     R1,#-0x40
   \   000007   12....       LCALL   ??HalLcd_HW_Control?relay
    676            for (n = 0; n < (8 * 8); n++)
   \   00000A   7E40         MOV     R6,#0x40
    677            {
    678              HalLcd_HW_Write(0x00);
   \                     ??HalLcd_HW_ClearAllSpecChars_0:
   \   00000C                ; Setup parameters for call to function HalLcd_HW_Write
   \   00000C   7900         MOV     R1,#0x0
   \   00000E   12....       LCALL   ??HalLcd_HW_Write?relay
    679            }
   \   000011   1E           DEC     R6
   \   000012   EE           MOV     A,R6
   \   000013   70F7         JNZ     ??HalLcd_HW_ClearAllSpecChars_0
    680          }
   \   000015   80..         SJMP    ?Subroutine2
    681          
    682          /**************************************************************************************************
    683           * @fn      HalLcd_HW_WriteChar
    684           *
    685           * @brief   Write one char to the display
    686           *
    687           * @param   uint8 line - line number that the char will be displayed
    688           *          uint8 col - colum where the char will be displayed
    689           *
    690           * @return  None
    691           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    692          void HalLcd_HW_WriteChar(uint8 line, uint8 col, char text)
   \                     HalLcd_HW_WriteChar:
    693          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FF           MOV     R7,A
   \   000007   8A..         MOV     ?V0 + 0,R2
   \   000009   EB           MOV     A,R3
   \   00000A   FE           MOV     R6,A
    694            if (col < LCD_MAX_LINE_LENGTH)
   \   00000B   EA           MOV     A,R2
   \   00000C   C3           CLR     C
   \   00000D   9410         SUBB    A,#0x10
   \   00000F   500E         JNC     ??CrossCallReturnLabel_4
    695            {
    696              SET_DDRAM_ADDR((line - 1) * LCD_MAX_LINE_LENGTH + col);
   \   000011                ; Setup parameters for call to function HalLcd_HW_Control
   \   000011   74FF         MOV     A,#-0x1
   \   000013   2F           ADD     A,R7
   \   000014   C4           SWAP    A
   \   000015   54F0         ANL     A,#0xf0
   \   000017   25..         ADD     A,?V0 + 0
   \   000019   4480         ORL     A,#0x80
   \   00001B   F9           MOV     R1,A
   \   00001C   12....       LCALL   ?Subroutine7 & 0xFFFF
    697              HalLcd_HW_Write(text);
    698            }
    699            else
    700            {
    701              return;
    702            }
    703          }
   \                     ??CrossCallReturnLabel_4:
   \   00001F   80..         SJMP    ?Subroutine2
    704          
    705          /**************************************************************************************************
    706           * @fn          halLcdWriteLine
    707           *
    708           * @brief       Write one line on display
    709           *
    710           * @param       uint8 line - display line
    711           *              char *pText - text buffer to write
    712           *
    713           * @return      none
    714           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    715          void HalLcd_HW_WriteLine(uint8 line, const char *pText)
   \                     HalLcd_HW_WriteLine:
    716          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 1,R1
   \   000007   EA           MOV     A,R2
   \   000008   FE           MOV     R6,A
   \   000009   EB           MOV     A,R3
   \   00000A   FF           MOV     R7,A
    717            uint8 count;
    718            uint8 totalLength = (uint8)osal_strlen( (char *)pText );
   \   00000B                ; Setup parameters for call to function osal_strlen
   \   00000B   12....       LCALL   ?Subroutine6 & 0xFFFF
    719          
    720            /* Write the content first */
    721            for (count=0; count<totalLength; count++)
   \                     ??CrossCallReturnLabel_2:
   \   00000E   75..00       MOV     ?V0 + 0,#0x0
   \   000011   8018         SJMP    ??HalLcd_HW_WriteLine_0
    722            {
    723              HalLcd_HW_WriteChar(line, count, (*(pText++)));
   \                     ??HalLcd_HW_WriteLine_1:
   \   000013                ; Setup parameters for call to function HalLcd_HW_WriteChar
   \   000013   8E82         MOV     DPL,R6
   \   000015   8F83         MOV     DPH,R7
   \   000017   E0           MOVX    A,@DPTR
   \   000018   FB           MOV     R3,A
   \   000019   AA..         MOV     R2,?V0 + 0
   \   00001B   A9..         MOV     R1,?V0 + 1
   \   00001D   12....       LCALL   ??HalLcd_HW_WriteChar?relay
   \   000020   8E82         MOV     DPL,R6
   \   000022   8F83         MOV     DPH,R7
   \   000024   A3           INC     DPTR
   \   000025   AE82         MOV     R6,DPL
   \   000027   AF83         MOV     R7,DPH
    724            }
   \   000029   05..         INC     ?V0 + 0
   \                     ??HalLcd_HW_WriteLine_0:
   \   00002B   E5..         MOV     A,?V0 + 0
   \   00002D   C3           CLR     C
   \   00002E   95..         SUBB    A,?V0 + 2
   \   000030   40E1         JC      ??HalLcd_HW_WriteLine_1
    725          
    726            /* Write blank spaces to rest of the line */
    727            for(count=totalLength; count<LCD_MAX_LINE_LENGTH;count++)
   \   000032   85....       MOV     ?V0 + 0,?V0 + 2
   \   000035   800B         SJMP    ??HalLcd_HW_WriteLine_2
    728            {
    729              HalLcd_HW_WriteChar(line, count, ' ');
   \                     ??HalLcd_HW_WriteLine_3:
   \   000037                ; Setup parameters for call to function HalLcd_HW_WriteChar
   \   000037   7B20         MOV     R3,#0x20
   \   000039   AA..         MOV     R2,?V0 + 0
   \   00003B   A9..         MOV     R1,?V0 + 1
   \   00003D   12....       LCALL   ??HalLcd_HW_WriteChar?relay
    730            }
   \   000040   05..         INC     ?V0 + 0
   \                     ??HalLcd_HW_WriteLine_2:
   \   000042   E5..         MOV     A,?V0 + 0
   \   000044   C3           CLR     C
   \   000045   9410         SUBB    A,#0x10
   \   000047   40EE         JC      ??HalLcd_HW_WriteLine_3
    731          }
   \   000049   7F03         MOV     R7,#0x3
   \   00004B   02....       LJMP    ?BANKED_LEAVE_XDATA
    732          
    733          /**************************************************************************************************
    734           * @fn      HalLcd_HW_WaitUs
    735           *
    736           * @brief   wait for x us. @ 32MHz MCU clock it takes 32 "nop"s for 1 us delay.
    737           *
    738           * @param   x us. range[0-65536]
    739           *
    740           * @return  None
    741           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    742          void HalLcd_HW_WaitUs(uint16 microSecs)
   \                     HalLcd_HW_WaitUs:
    743          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
   \   000000   8020         SJMP    ??HalLcd_HW_WaitUs_0
    744            while(microSecs--)
    745            {
    746              /* 32 NOPs == 1 usecs */
    747              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \                     ??HalLcd_HW_WaitUs_1:
   \   000002   00           nop
   \   000003   00           nop
   \   000004   00           nop
   \   000005   00           nop
   \   000006   00           nop
    748              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \   000007   00           nop
   \   000008   00           nop
   \   000009   00           nop
   \   00000A   00           nop
   \   00000B   00           nop
    749              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \   00000C   00           nop
   \   00000D   00           nop
   \   00000E   00           nop
   \   00000F   00           nop
   \   000010   00           nop
    750              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \   000011   00           nop
   \   000012   00           nop
   \   000013   00           nop
   \   000014   00           nop
   \   000015   00           nop
    751              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \   000016   00           nop
   \   000017   00           nop
   \   000018   00           nop
   \   000019   00           nop
   \   00001A   00           nop
    752              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \   00001B   00           nop
   \   00001C   00           nop
   \   00001D   00           nop
   \   00001E   00           nop
   \   00001F   00           nop
    753              asm("nop"); asm("nop");
   \   000020   00           nop
   \   000021   00           nop
    754            }
   \                     ??HalLcd_HW_WaitUs_0:
   \   000022   EA           MOV     A,R2
   \   000023   F8           MOV     R0,A
   \   000024   EB           MOV     A,R3
   \   000025   F9           MOV     R1,A
   \   000026   E8           MOV     A,R0
   \   000027   24FF         ADD     A,#-0x1
   \   000029   1A           DEC     R2
   \   00002A   E9           MOV     A,R1
   \   00002B   34FF         ADDC    A,#-0x1
   \   00002D   FB           MOV     R3,A
   \   00002E   E8           MOV     A,R0
   \   00002F   49           ORL     A,R1
   \   000030   70D0         JNZ     ??HalLcd_HW_WaitUs_1
    755          }
   \   000032   02....       LJMP    ?BRET

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdInit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdInit

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteString?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteString

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteValue?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteValue

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteScreen?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteScreen

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteStringValue?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteStringValue

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteStringValueValue?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteStringValueValue

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdDisplayPercentBar?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdDisplayPercentBar

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_Control?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_Control

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_Write?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_Write

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_SetContrast?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_SetContrast

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_Clear?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_Clear

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_ClearAllSpecChars?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_ClearAllSpecChars

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_WriteChar?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_WriteChar

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_WriteLine?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_WriteLine

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_WaitUs?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_WaitUs

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "TexasInstruments">`:
   \   000000   54657861     DB "TexasInstruments"
   \            73496E73
   \            7472756D
   \            656E7473
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "[          ]  ">`:
   \   000000   5B202020     DB "[          ]  "
   \            20202020
   \            2020205D
   \            202000  
    756          #endif
    757          
    758          
    759          /**************************************************************************************************
    760          **************************************************************************************************/
    761          
    762          
    763          

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     HalLcdDisplayPercentBar            0      0     32
       -> HalLcdWriteString             0      0     58
       -> osal_memcpy                   0      0     64
       -> _ltoa                         0      0     62
       -> HalLcdWriteString             0      0     58
     HalLcdInit                         2      0      0
       -> HalLcd_HW_Init                4      0      0
     HalLcdWriteScreen                  0      0      9
       -> HalLcdWriteString             0      0     18
       -> HalLcdWriteString             0      0     18
     HalLcdWriteString                  0      0     64
       -> osal_mem_alloc                0      0     34
       -> HalLcdWriteString             0      0     34
       -> osal_strlen                   0      0     34
       -> osal_memcpy                   0      0     40
       -> osal_strlen                   0      0     34
       -> osal_mem_alloc                0      0     34
       -> osal_memcpy                   0      0     40
       -> osal_memcpy                   0      0     40
       -> osal_mem_free                 0      0     34
       -> HalLcd_HW_WriteLine           0      0     34
     HalLcdWriteStringValue             0      0     47
       -> osal_strlen                   0      0     86
       -> osal_memcpy                   0      0     92
       -> _ltoa                         0      0     90
       -> HalLcdWriteString             0      0     86
     HalLcdWriteStringValueValue        0      0     51
       -> osal_strlen                   0      0     88
       -> osal_memcpy                   0      0     94
       -> _ltoa                         0      0     92
       -> osal_strlen                   0      0     88
       -> _ltoa                         0      0     92
       -> HalLcdWriteString             0      0     88
     HalLcdWriteValue                   0      0     44
       -> _ltoa                         0      0     86
       -> HalLcdWriteString             0      0     82
     HalLcd_HW_Clear                    0      0      9
       -> HalLcd_HW_Control             0      0     18
       -> HalLcd_HW_Write               0      0     18
     HalLcd_HW_ClearAllSpecChars        0      0      9
       -> HalLcd_HW_Control             0      0     18
       -> HalLcd_HW_Write               0      0     18
     HalLcd_HW_Control                  0      0      9
     HalLcd_HW_Init                     2      0      0
       -> HalLcd_HW_WaitUs              4      0      0
       -> HalLcd_HW_WaitUs              4      0      0
       -> HalLcd_HW_Control             4      0      0
       -> HalLcd_HW_SetContrast         4      0      0
       -> HalLcd_HW_Control             4      0      0
       -> HalLcd_HW_Control             4      0      0
       -> HalLcd_HW_Control             4      0      0
       -> HalLcd_HW_WaitUs              4      0      0
       -> HalLcd_HW_Clear               4      0      0
       -> HalLcd_HW_ClearAllSpecChars
                                        4      0      0
       -> HalLcd_HW_Control             4      0      0
     HalLcd_HW_SetContrast              0      0      9
       -> HalLcd_HW_Control             0      0     18
       -> HalLcd_HW_Write               0      0     18
     HalLcd_HW_WaitUs                   0      0      0
     HalLcd_HW_Write                    0      0      9
     HalLcd_HW_WriteChar                0      0     20
       -> HalLcd_HW_Control             0      0     18
       -> HalLcd_HW_Write               0      0     18
     HalLcd_HW_WriteLine                0      0     28
       -> osal_strlen                   0      0     22
       -> HalLcd_HW_WriteChar           0      0     22
       -> HalLcd_HW_WriteChar           0      0     22


   Segment part sizes:

     Function/Label                      Bytes
     --------------                      -----
     _A_P0                                  1
     _A_P1                                  1
     PERCFG                                 1
     P0SEL                                  1
     P1SEL                                  1
     _A_U1CSR                               1
     U1DBUF                                 1
     U1BAUD                                 1
     U1UCR                                  1
     U1GCR                                  1
     P0DIR                                  1
     P1DIR                                  1
     Lcd_Line1                              2
     HalLcdInit                            14
     ?Subroutine1                           7
     HalLcdWriteString                    273
     ?Subroutine6                           7
     ??Subroutine10_0                       6
     ??Subroutine12_0                       8
     HalLcdWriteValue                      65
     ??Subroutine9_0                        6
     HalLcdWriteScreen                     26
     ?Subroutine2                           5
     HalLcdWriteStringValue               112
     ?Subroutine5                           1
     ??Subroutine8_0                        2
     ?Subroutine4                           4
     ?Subroutine3                          10
     ??Subroutine11_0                       4
     HalLcdWriteStringValueValue          249
     HalLcdDisplayPercentBar              183
     HalLcd_HW_Init                       116
     HalLcd_HW_Control                     17
     ?Subroutine0                           9
     HalLcd_HW_Write                       19
     HalLcd_HW_SetContrast                 14
     ?Subroutine7                           9
     HalLcd_HW_Clear                       21
     HalLcd_HW_ClearAllSpecChars           23
     HalLcd_HW_WriteChar                   33
     HalLcd_HW_WriteLine                   78
     HalLcd_HW_WaitUs                      53
     ??HalLcdInit?relay                     6
     ??HalLcdWriteString?relay              6
     ??HalLcdWriteValue?relay               6
     ??HalLcdWriteScreen?relay              6
     ??HalLcdWriteStringValue?relay         6
     ??HalLcdWriteStringValueValue?relay    6
     ??HalLcdDisplayPercentBar?relay        6
     ??HalLcd_HW_Init?relay                 6
     ??HalLcd_HW_Control?relay              6
     ??HalLcd_HW_Write?relay                6
     ??HalLcd_HW_SetContrast?relay          6
     ??HalLcd_HW_Clear?relay                6
     ??HalLcd_HW_ClearAllSpecChars?relay    6
     ??HalLcd_HW_WriteChar?relay            6
     ??HalLcd_HW_WriteLine?relay            6
     ??HalLcd_HW_WaitUs?relay               6
     ?<Constant "TexasInstruments">        17
     ?<Constant "[          ]  ">          15

 
 1 374 bytes in segment BANKED_CODE
    96 bytes in segment BANK_RELAYS
    12 bytes in segment SFR_AN
    32 bytes in segment XDATA_ROM_C
     2 bytes in segment XDATA_Z
 
 1 470 bytes of CODE  memory
    32 bytes of CONST memory
     0 bytes of DATA  memory (+ 12 bytes shared)
     2 bytes of XDATA memory

Errors: none
Warnings: none
